<?xml version="1.0"?>
<odoo>
    <!--Crede complaint Object views and action -->
    <record id="crede_complaint_form_view" model="ir.ui.view">
        <field name="name">crede.complaint.form</field>
        <field name="model">crede.complaint</field>
        <field name="arch" type="xml">
            <form string="Complaint">
                <header>
                    <button name="new_complaint_button" type="object" states="new" string="Post Complaint" class="oe_highlight" />
                    <button name="resolve_button" string="Resolve" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_resolve','=',True),('state','!=', 'waiting')]}" />
                    <button name="refuse_button" string="Refuse" type="object" class="oe_highlight" attrs="{'invisible':['|',('is_resolve','=',True),('state','!=', 'waiting')]}" />
                    <button name="close_button" string="Close" type="object" states="resolve" class="oe_highlight" />
                    <button name="reset_to_draft_button" string="Reset To Draft" type="object" states="refused,closed" class="oe_highlight" />
                    <field name="state" widget="statusbar" statusbar_visible="new,waiting,resolve,refused,closed" readonly="1" />
                </header>
                <sheet>
                    <div class="oe_title">
                        <h1>
                            <field name="name" readonly="1" />
                        </h1>
                    </div>
                    <group>
                        <group>
                            <field name="subject" attrs="{'readonly':[('state','!=','new')]}" required="True" />
                            <field name="complaint_category" attrs="{'readonly':[('state','!=','new')]}" required="True" options="{'no_create': True, 'no_open':True,'no_create_edit':True}" />
                            <field name="create_date" attrs="{'readonly':[('state','!=','new')]}" />
                            <field name="complainter_complaint"   required="True" context="{'form_view_ref':'crede_complaint_registration.crede_complaint_form'}"/>
                        </group>
                        <group>
                            <field name="created_by" attrs="{'readonly':[('state','!=','new')]}" readonly="1" required="True" />
                            <field name="resp_persons" options="{'no_create': True}" attrs="{'readonly':[('state','!=','new')]}" readonly="0" required="True" />
                            <field name="assigned_person" options="{'no_create': True}" attrs="{'readonly':[('state','!=','new')]}" readonly="0" required="True" />
                            <field name="has_effect_on" widget="many2many_tags" attrs="{'readonly':[('state','!=','new')]}" required="True" options="{'no_create': True, 'no_open':True,'no_create_edit':True}"/>
                            <field name="has_mode_on" widget="many2many_tags" attrs="{'readonly':[('state','!=','new')]}" required="True" options="{'no_create': True, 'no_open':True,'no_create_edit':True}"/>
                            <field name="is_resolve" invisible="1" />
                            <field name="company_id" options="{'no_create': True}" groups="base.group_multi_company" attrs="{'readonly':[('state','!=','new')]}" />
                        </group>
                    </group>
                    <group>
                        <field name="description" string="Description" attrs="{'readonly':[('state','!=','new')]}" />
                    </group>
                    <notebook>
                        <page string="Resolve Comment" name="resolved_page" attrs="{'invisible':[('state','not in',['resolve','closed'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="resolved_by" readonly="1" />
                                    <field name="resolved_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                        <page string="Refused Comment" name="refused_page" attrs="{'invisible':[('state','not in',['refused'])]}">
                            <group>
                                <group>
                                    <field name="rating" widget="priority" readonly="1" />
                                    <field name="refused_by" readonly="1" />
                                    <field name="refused_comment" readonly="1" />
                                </group>
                            </group>
                        </page>
                    </notebook>
                </sheet>
                <div class="o_attachment_preview" />
                <div class="oe_chatter">
                    <field name="message_follower_ids" widget="mail_followers" />
                    <field name="activity_ids" widget="mail_activity" />
                    <field name="message_ids" widget="mail_thread" />
                </div>
            </form>
        </field>
    </record>

    <record id="crede_complaint_tree_view" model="ir.ui.view">
        <field name="name">crede.complaint.tree</field>
        <field name="model">crede.complaint</field>
        <field name="arch" type="xml">
            <tree>
                <field name="name" string="Sequence" />
                <field name="subject" />
                <field name="complaint_category" />
                <field name="create_date" />
                <field name="created_by" />
                <field name="state" />
            </tree>
        </field>
    </record>

    <record id="crede_complaint_search_views" model="ir.ui.view">
        <field name="name">crede.complaint.search</field>
        <field name="model">crede.complaint</field>
        <field name="arch" type="xml">
            <search string="Complaint">
                <field name="name" />
                <filter string="To resolve Complaint" name="to_app_complaint" domain="[('state', '=', 'waiting')]" />
                <filter string="Resolved Complaint" name="app_complaint" domain="[('state','=','resolve')]" />
                <filter string="Refused Complaint" name="refused" domain="[('state','=','refused')]" />
                <separator />
                <group expand="0" string="Group by...">
                    <filter string="Sequence" name="name" context="{'group_by': 'name'}" />
                    <filter string="Subject" name="subject" context="{'group_by': 'subject'}" />
                    <filter string="Complaint Categories" name="complaint_category" context="{'group_by': 'complaint_category'}" />
                    <filter string="Created Date" name="create_date" context="{'group_by': 'create_date'}" />
                    <filter string="Created By" name="created_by" context="{'group_by': 'created_by'}" />
                </group>
            </search>
        </field>
    </record>

    <record id="crede_complaint_view_actions" model="ir.actions.act_window">
        <field name="name">Complaint</field>
        <field name="type">ir.actions.act_window</field>
        <field name="res_model">crede.complaint</field>
        <field name="view_mode">tree,form</field>
    </record>
</odoo>
